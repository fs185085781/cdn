<!DOCTYPE html>
<html lang="en">
<head>
    <meta charset="UTF-8">
    <title>ui在react中使用</title>
    <script src="./simpleui-1.0.0/boot.js?mode=react&jsx=true&modules=form&skin=default&lang=zh_CN&profile=test"></script>
    <script>
        class Button extends SimpleUi {
            textchange(e){
                console.log(this);
                e.base.react.props.changeMessage("您刚才更改了"+e.base.getName()+"的按钮,修改前为'"+e.data.oldText+"',修改后为'"+e.data.text+"'");
            }
            buttonClick(e){
                alert("你点击了"+e.base.getName());
            }
            didUpdate(){
                console.log(this);
            }
        }
    </script>
</head>
<body>
<div id="example"></div>
<div>
    <p>
        1.兼容性:参照React兼容性
    </p>
    <p>
        2.获取组件对象:组件内的this.ui
    </p>
    <p>
        3.访问组件属性:this.setState()会同步设置组件属性
    </p>
    <p>
        4.调用组件方法:拿到组件对象后调用组件方法
    </p>
    <p>
        5.组件事件反馈:事件e.base表示当前组件,e.type表示事件名称,e.base.react表示React中的组件对象
    </p>
    <p>
        6.注意事项:React组件内的componentDidMount,componentDidUpdate方法请使用didMount,didUpdated代替
    </p>
</div>
<script type="text/babel">
    class App extends React.Component {
        constructor() {
            super();
            this.state = {
                btn_1:{
                    name:"第一个按钮",
                    text:"第一个按钮名称",
                    className:"simple-button",
                    elclick:"buttonClick"
                },
                btn_2:{
                    name:"第二个按钮",
                    text:"第二个按钮名称",
                    className:"simple-button",
                    eltextchange:"textchange",
                    elclick:"buttonClick"
                },
                a_btn:{
                    name:"点击我修改第二个按钮名称"
                },
                message:""
            }
        }
        btnClick = () => this.setState(state=>({btn_2:{...state.btn_2,text:"修改后按钮"}}));/*{this.state.btn_2.text="修改后按钮";this.setState(this.state)};*/
        changeMessage = message => {this.state.message = message;this.setState(this.state)};
        render() {
            return (
                <div>
                    <Button options={this.state.btn_1} />
                    <Button options={this.state.btn_2} changeMessage={this.changeMessage}/>
                    <a onClick={this.btnClick}>{this.state.a_btn.name}</a>
                    <div>{this.state.message}</div>
                </div>
            );
        }
    }
    ReactDOM.render(
         <App />,
        document.getElementById('example')
    );
</script>
</body>
</html>