<!DOCTYPE html>
<html lang="en">
<head>
    <meta charset="UTF-8">
    <title>ui在angular12中使用</title>
    <script src="./plugins/simpleui-1.0.0/boot.js?mode=angular2&modules=form&skin=default&lang=zh_CN&profile=test"></script>
</head>
<body>
<script>
    var app = {};
    //创建一个Service
    function TestService() {}
    TestService.prototype = {
        /*say: function(word) {
            return word;
        }*/
    };
    //数据
    var pageData = {
        buttons:[
            {
                name:"第一个按钮",
                text:"第一个按钮名称",
                elclick:true
            } ,
            {
                name:"第二个按钮",
                text:"第二个按钮名称",
                eltextchange:true,
                elclick:true
            }
        ],
        message:""
    };
    var button = SimpleUiComponent("simple-button");
    app.AppComponent =
        ng.core.Component({
            selector: 'mainApp',
            template: '<div><div simple-button [uiInput]="data.buttons[0]" (uiOutput)="uiEventMethod($event)"></div><div simple-button [uiInput]="data.buttons[1]" (uiOutput)="uiEventMethod($event)"></div>' +
            '<a (click)="changeButton()">点击我修改第二个按钮名称</a>'+
            '<div>{{data.message}}</div>',
            directives: [button],
            providers: [TestService],
        }).Class({
                constructor: [TestService, function(service) {
                    this.data = pageData;
                }],
                changeButton:function(e){
                    this.data.buttons[1].text = "修改后按钮";
                },
                uiEventMethod:function(e){
                    if(e.type == "click"){
                        alert("你点击了"+e.base.getName());
                    }else if(e.type =="textchange"){
                        this.data.message = "您刚才更改了"+e.base.getName()+"的按钮,修改前为'"+e.data.oldText+"',修改后为'"+e.data.text+"'";
                    }
                }
            });
    document.addEventListener('DOMContentLoaded', function() {
        ng.platform.browser.bootstrap(app.AppComponent);
    });
</script>
<mainApp></mainApp>
<div>
    <p>
        1.兼容性:参照Angular2兼容性
    </p>
    <p>
        2.获取组件对象:simple.getBySelect(ele),simple.getByUid(uid),simple.getsBySelect(eles)
    </p>
    <p>
        3.访问组件属性:this.data会同步修改组件属性
    </p>
    <p>
        4.调用组件方法:拿到组件对象后调用组件方法
    </p>
    <p>
        5.组件事件反馈:事件e.base表示当前组件,e.type表示事件名称,e.angular2表示当前Angular组件,e.data表示事件数据(并不是所有事件都有)
    </p>
</div>
</body>
</html>